(this.webpackJsonp=this.webpackJsonp||[]).push([[81],{4304:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAfCAMAAACmqq93AAAAUVBMVEUAAAAMDAwLCwv6+vr+/v79/f339/f6+vr7+/vu7u7Hx8f////v7+/6+vrh4eH////7+/v8/Pze3t7+/v78/Pz5+fnf39/////39/empqb///+KJeaPAAAAGnRSTlMABgqj4KGkk4JFKfBmYiTfwXET0MKyNzAiGkjwtncAAACUSURBVDjL5dFLDsIwDEXRxPknDaXl7/0vlCAxaC2ZvjnX0yNZls1/t+K0w/IZYDqjdA2MUVs8H9Gy5JyTazxy9hec+dsRzcwgXRilJw/Tzii1V5xeJE0q9ZJOOK0GpWfSKDV0v7kLGUmjNuylr/qvpCTwq7eXur633e2FNPlIwTkXx7gY01QHHFLL0jYBpR2R/bR1b4y2G5MTsa3dAAAAAElFTkSuQmCC"},4322:function(e,t,r){"use strict";r.r(t),r.d(t,"useOpenProtocolUrl",(function(){return G})),r.d(t,"OverviewDefiProtocol",(function(){return q}));var o=r(573),n=r(4),l=r.n(n),u=r(20),c=r(51),a=r(110),d=r(62),i=r(27),s=r(11),b=r(105),j=r(1),p=r(21),f=r.n(p),O=r(88),x=r(4304),m=r.n(x),v=r(867),h=r(120),y=r(24),g=r(206),w=r(270),A=r(97),k=r(61),C=r(38),I=r(78),_=r(41),P=r(121),T=r(1093),B=r(0),N=function(e){var t=e.icon,r=e.name,o=e.rate,n=e.desc,l=e.extra,a=e.toggle,i=e.collapsed,s=e.onOpenDapp,b=Object(c.default)(),p=Object(j.useMemo)((function(){return Object(B.jsx)(T.OverviewBadge,{rate:o})}),[o]);return b?Object(B.jsxs)(d.default,{px:4,py:4,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[Object(B.jsxs)(_.default,{w:"full",mb:"2",children:[Object(B.jsx)(_.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:Object(B.jsxs)(_.default,{flex:"1",children:[Object(B.jsx)(P.TokenIcon,{size:6,token:{logoURI:t,name:r}}),Object(B.jsx)(u.default,{onPress:s,typography:"Body1Strong",ml:"2",children:r}),o.isNaN()?null:p]})}),Object(B.jsx)(I.default,{type:"plain",onPress:a,name:i?"ChevronDownMini":"ChevronUpMini"})]}),Object(B.jsxs)(d.default,{w:"full",children:[n,l]})]}):Object(B.jsxs)(_.default,{px:6,py:3,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[Object(B.jsx)(_.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:Object(B.jsxs)(_.default,{flex:"1",children:[Object(B.jsx)(P.TokenIcon,{size:8,token:{logoURI:t,name:r}}),Object(B.jsx)(u.default,{typography:"Heading",ml:"2",onPress:s,children:r}),o.isNaN()?null:p]})}),Object(B.jsx)(k.default,{onPress:a,children:Object(B.jsxs)(_.default,{alignItems:"center",children:[Object(B.jsxs)(d.default,{children:[n,l]}),i?Object(B.jsx)(C.default,{name:"ChevronDownMini",size:20}):Object(B.jsx)(C.default,{name:"ChevronUpMini",size:20})]})})]})},M=r(317),S=r.n(M),V=r(3),D=r.n(V),U=r(1663),R=r.n(U);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){D()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){var t,r=e.pool,o=e.tokenKey,n=Object(c.default)();return Object(B.jsx)(d.default,{children:null==r||null==(t=r[o])?void 0:t.map((function(e,t){var r,o;return Object(B.jsxs)(_.default,{alignItems:"center",mt:t>0?"4px":0,flexWrap:"wrap",children:[Object(B.jsx)(P.TokenIcon,{token:e,size:n?5:4,mr:"1"}),Object(B.jsx)(u.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mr:"1",children:Object(B.jsx)(h.FormatCurrencyNumber,{onlyNumber:!0,value:new f.a(null!=(r=e.balanceParsed)?r:0)})}),Object(B.jsx)(u.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mx:"1",children:e.symbol}),Object(B.jsx)(i.default.Body2,{color:"text-subdued",children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new f.a(null!=(o=e.value)?o:0)})})]},e.tokenAddress)}))})},H=function(e){var t=e.pools,r=Object(O.default)(),o=Object(c.default)(),n=Object(j.useCallback)((function(e){return!e.visibleOn||(null==e.visibleOn?void 0:e.visibleOn({pools:t,isVertical:o}))}),[o,t]),l=Object(j.useMemo)((function(){var e,t,r=[{dataIndex:"supplyTokens",header:"form__pool_uppercase",render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"supplyTokens"}))},visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.supplyTokens)?void 0:t.length)>0}))}},{dataIndex:"borrowTokens",header:"form__borrowed_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.borrowTokens)?void 0:t.length)>0}))},render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"borrowTokens"}))}},{dataIndex:"rewardTokens",header:"form__rewards_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return(null==(t=e.rewardTokens)?void 0:t.length)>0}))},render:function(e){return Object(B.jsx)(E,F(F({},e),{},{tokenKey:"rewardTokens"}))}}].filter(n),o=[{dataIndex:"lockedInfo",header:"form__unlock_time_uppercase",visibleOn:function(e){return e.pools.some((function(e){var t;return!(null==e||null==(t=e.lockedInfo)||!t.unlockTime)}))},render:function(e){var t,r=e.pool,o=null==r||null==(t=r.lockedInfo)?void 0:t.unlockTime;return"number"!==typeof o?o:Object(B.jsx)(i.default.Body2Strong,{children:R()(1e3*o).format("YYYY/MM/DD HH:mm")})}},{dataIndex:"apr",header:"form__apr_uppercase",visibleOn:function(e){return e.pools.some((function(e){return!!e.apr}))},render:function(e){var t,r=e.pool;return Object(B.jsxs)(i.default.Body2Strong,{children:[Object(B.jsx)(h.FormatCurrencyNumber,{onlyNumber:!0,value:new f.a(null!=(t=r.apr)?t:0)}),"%"]})}},{dataIndex:"poolValue",header:"form__value_uppercase",render:function(e){var t,r=e.pool;return Object(B.jsx)(i.default.Body2Strong,{children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new f.a(null!=(t=r.poolValue)?t:0)})})},boxProps:{textAlign:"right",justifyContent:"flex-end"}}].filter(n);return 1===(null==r?void 0:r.length)&&null!=r&&null!=(e=r[0])&&e.dataIndex&&r.push({header:"content__price",render:function(e){var r=e.pool;return Object(B.jsx)(d.default,{children:null==r?void 0:r[t].map((function(e){var t;return Object(B.jsx)(i.default.Body2Strong,{children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new f.a(null!=(t=e.price)?t:0)})},e.tokenAddress)}))})},dataIndex:t=r[0].dataIndex}),r.concat(o)}),[n]),u=Object(j.useMemo)((function(){return t.length}),[t]),a=Object(j.useCallback)((function(e,t){var o=t===u-1;return Object(B.jsx)(d.default,{mb:"4",pb:o?0:4,borderBottomWidth:o?0:"1px",borderBottomColor:"border-subdued",mx:"4",children:l.map((function(t,o){return t.dataIndex&&S()(e[t.dataIndex])?null:Object(B.jsxs)(d.default,{mt:0===o?0:"4",children:[Object(B.jsx)(i.default.Subheading,{mb:"4",color:"text-subdued",children:r.formatMessage({id:t.header})}),t.dataIndex&&!S()(e[t.dataIndex])?t.render({pool:e}):null]},t.header)}))},e.poolCode)}),[l,r,u]),b=Object(j.useCallback)((function(e,r){var o=r===t.length-1;return Object(B.jsx)(_.default,{alignItems:"flex-start",borderBottomColor:"border-subdued",borderBottomWidth:o?0:"1px",mx:"6",py:"4",children:l.map((function(t){var r;return Object(j.createElement)(s.default,F(F({flex:"1"},null!=(r=t.boxProps)?r:{}),{},{key:t.header}),t.render({pool:e}))}))},e.poolCode)}),[t,l]),p=Object(j.useMemo)((function(){return o?null:Object(B.jsx)(_.default,{mx:"6",py:"0",flex:"1",children:l.map((function(e){var t;return Object(B.jsx)(s.default,F(F({flex:"1"},null!=(t=e.boxProps)?t:{}),{},{children:Object(B.jsx)(i.default.Subheading,{color:"text-subdued",children:r.formatMessage({id:e.header})})}),e.header)}))})}),[l,r,o]);return l.length?Object(B.jsxs)(s.default,{children:[p,t.map((function(e,t){return(o?a:b)(e,t)}))]}):null},K=function(e){var t,r,o=e.onConfirm,n=e.protocol,l=e.onClose,u=Object(O.default)(),c=Object(y.useActiveWalletAccount)().network;return Object(B.jsx)(a.default,{visible:!0,onClose:l,contentProps:{icon:Object(B.jsxs)(s.default,{size:"52px",borderRadius:"12px",borderWidth:"1px",borderColor:"border-subdued",overflow:"hidden",position:"relative",children:[Object(B.jsx)(b.default,{size:"full",src:n.protocolIcon,alt:n.protocolName}),Object(B.jsx)(b.default,{source:m.a,w:"35px",h:"25px",position:"absolute",bottom:"0",right:"0",zIndex:"1"}),Object(B.jsx)(b.default,{src:null!=(t=null==c?void 0:c.logoURI)?t:"",w:"12px",h:"12px",position:"absolute",bottom:"2px",right:"2px",zIndex:"2"})]}),title:n.protocolName,contentElement:Object(B.jsxs)(d.default,{children:[Object(B.jsx)(i.default.Body2,{textAlign:"center",children:null!=(r=n.protocolUrl)?r:""}),Object(B.jsx)(i.default.Body2,{mt:"6",textAlign:"center",children:u.formatMessage({id:"content__you_are_about_to_visit_this_site_in_a_dapp_browser_do_you_want_to_continue"})})]})},footerButtonProps:{primaryActionTranslationId:"action__visit",onPrimaryActionPress:function(e){var t=e.onClose;null==t||t(),null==o||o()}}})},G=function(e){var t=Object(y.useNavigation)(),r=Object(c.default)(),o=Object(j.useCallback)((function(){var r;Object(w.openDapp)(null!=(r=null==e?void 0:e.protocolUrl)?r:""),t.canGoBack()&&t.goBack()}),[null==e?void 0:e.protocolUrl,t]);return Object(j.useCallback)((function(){if(null!=e&&e.protocolUrl)return r?void Object(A.showDialog)(Object(B.jsx)(K,{protocol:e,onConfirm:o})):o()}),[e,r,o])},W=function(e){var t=e.poolType,r=Object(c.default)();return Object(B.jsx)(u.default,{ml:r?4:6,my:"4",children:Object(B.jsx)(s.default,{px:"6px",bg:"surface-highlight-default",borderRadius:"6px",children:Object(B.jsx)(i.default.Body2Strong,{color:"text-default",numberOfLines:1,children:t})})})},q=function(e){var t=e._id,r=e.pools,n=e.protocolValue,a=e.protocolName,i=e.protocolIcon,b=e.claimableValue,p=e.showHeader,x=void 0===p||p,m=e.bgColor,w=e.poolCode,A=Object(O.default)(),k=Object(c.default)(),C=Object(g.useCurrentFiatValue)(),I=Object(y.useActiveWalletAccount)(),_=I.networkId,P=I.accountId,T=Object(y.useAccountValues)({networkId:_,accountId:P}),M=G(e),S=Object(j.useMemo)((function(){return new f.a(n).multipliedBy(C).div(T.value).multipliedBy(100)}),[n,T,C]),V=Object(j.useMemo)((function(){return w?r.filter((function(e){return l()(e,2)[1].filter((function(e){return e.poolCode===w})).length>0})).map((function(e){var t=l()(e,2);return[t[0],t[1].filter((function(e){return e.poolCode===w}))]})).map((function(e,r){var o,n=l()(e,2),u=n[0],c=n[1];return Object(B.jsxs)(d.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[Object(B.jsx)(W,{poolType:u,poolName:null==c||null==(o=c[0])?void 0:o.poolName}),Object(B.jsx)(H,{networkId:t.networkId,poolType:u,pools:c})]},u)})):Object(B.jsx)(s.default,{bg:m,children:r.map((function(e,r){var o,n=l()(e,2),u=n[0],c=n[1];return Object(B.jsxs)(d.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[Object(B.jsx)(W,{poolType:u,poolName:null==c||null==(o=c[0])?void 0:o.poolName}),Object(B.jsx)(H,{networkId:t.networkId,poolType:u,pools:c})]},u)}))})}),[m,r,t,w]);return Object(B.jsx)(v.ErrorBoundary,{children:Object(B.jsx)(o.default,{borderRadius:"12px",bg:"surface-default",borderWidth:"1px",borderColor:"border-subdued",mb:"6",value:!1,overflow:"hidden",renderCustomTrigger:function(e,t){return x?Object(B.jsx)(N,{name:a,onOpenDapp:M,rate:S,desc:Object(B.jsx)(u.default,{typography:{md:"Heading",sm:"Body1Strong"},textAlign:k?"left":"right",children:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new f.a(n)})}),extra:+b>0?Object(B.jsx)(u.default,{color:"text-subdued",typography:{md:"Body2Strong",sm:"CaptionStrong"},textAlign:k?"left":"right",children:A.formatMessage({id:"form__claimable_str"},{0:Object(B.jsx)(h.FormatCurrencyNumber,{value:0,convertValue:new f.a(b)})})}):void 0,icon:i,toggle:e,collapsed:t}):null},children:V})})}},5326:function(e,t,r){"use strict";r.r(t);var o=r(51),n=r(57),l=r(3),u=r.n(l),c=r(77),a=r(41),d=r(11),i=r(121),s=r(27),b=r(1),j=r(4322),p=r(44),f=r(21),O=r.n(f),x=r(88),m=r(120),v=r(24),h=r(206),y=r(199),g=r(1093),w=r(0);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(){var e,t=Object(x.default)(),r=Object(o.default)(),l=Object(p.useRoute)().params,u=l.networkId,f=l.protocolId,A=l.accountId,C=l.poolCode,I=Object(h.useCurrentFiatValue)(),_=Object(v.useAccountValues)({networkId:u,accountId:A}).value,P=Object(v.useAccountPortfolios)({networkId:u,accountId:A,type:y.EOverviewScanTaskType.defi}),T=P.data,B=P.loading,N=Object(b.useMemo)((function(){return null==T?void 0:T.find((function(e){return e._id.protocolId===f}))}),[T,f]),M=Object(b.useMemo)((function(){var e;return new O.a(null!=(e=null==N?void 0:N.protocolValue)?e:0).multipliedBy(I).div(_).multipliedBy(100)}),[null==N?void 0:N.protocolValue,_,I]),S=Object(b.useMemo)((function(){var e;return r?Object(w.jsx)(s.default.Caption,{children:Object(w.jsx)(m.FormatCurrencyNumber,{value:0,convertValue:new O.a(null!=(e=null==N?void 0:N.protocolValue)?e:0)})}):null}),[r,N]),V=Object(b.useMemo)((function(){var e;return r||C?Object(w.jsx)(s.default.Heading,{ml:"3",children:null==N?void 0:N.protocolName}):Object(w.jsxs)(a.default,{alignItems:"center",children:[Object(w.jsx)(i.default,{token:{logoURI:null==N?void 0:N.protocolIcon},size:8}),Object(w.jsx)(s.default.Heading,{ml:"3",children:null==N?void 0:N.protocolName}),Object(w.jsx)(d.default,{mx:"2",my:"auto",w:"1",h:"1",borderRadius:"2px",bg:"text-default"}),Object(w.jsx)(s.default.Heading,{children:Object(w.jsx)(m.FormatCurrencyNumber,{value:0,convertValue:new O.a(null!=(e=null==N?void 0:N.protocolValue)?e:0)})}),M.isGreaterThan(0)?Object(w.jsx)(g.OverviewBadge,{rate:M}):null]})}),[r,N,M,C]),D=Object(j.useOpenProtocolUrl)(N);return Object(w.jsx)(n.default,{size:"2xl",height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!(null!=N&&N.protocolUrl),header:V,footer:null!=N&&N.protocolUrl?void 0:null,headerDescription:S,onSecondaryActionPress:D,secondaryActionProps:{children:t.formatMessage({id:"form__visit_str"},{0:null!=(e=null==N?void 0:N.protocolName)?e:""})},scrollViewProps:{children:B||!N?Object(w.jsx)(c.default,{}):Object(w.jsx)(j.OverviewDefiProtocol,k(k({},N),{},{showHeader:!1,bgColor:"surface-default",poolCode:C}))}})},I=r(237),_=Object(I.default)(),P=[{name:y.OverviewModalRoutes.OverviewProtocolDetail,component:C}];t.default=function(){var e=Object(o.default)();return Object(w.jsx)(_.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:P.map((function(e){return Object(w.jsx)(_.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);